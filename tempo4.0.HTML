<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PrevisÃ£o do Tempo â€” Montes Claros (MG)</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root{
  --bg:#eef2f7; --panel:#fff; --accent:#0d7fbf; --text:#0b1720; --muted:#6b7280;
}
body.dark{
  --bg:#0f172a; --panel:#1e293b; --accent:#38bdf8; --text:#f1f5f9; --muted:#94a3b8;
}
body{margin:0;font-family:Inter,sans-serif;background:var(--bg);color:var(--text);transition:all .3s;}
header{background:linear-gradient(90deg,#0b3b5b,#0d5c8c);color:#fff;padding:16px;text-align:center;position:relative;}
header h1{margin:0;font-size:20px}
#themeBtns{position:absolute;top:10px;right:10px;display:flex;gap:8px;}
#themeBtns button{border:none;background:transparent;font-size:22px;cursor:pointer;color:#fff;transition:transform .2s;}
#themeBtns button:hover{transform:scale(1.1);}
nav{background:#09304d;display:flex;justify-content:center;gap:12px;padding:10px;flex-wrap:wrap;}
nav button{background:var(--accent);border:none;color:#fff;padding:8px 14px;border-radius:10px;cursor:pointer;font-weight:600;transition:all .18s;}
nav button.active,nav button:hover{background:#0f98df; transform:translateY(-2px);}
.wrap{display:grid;grid-template-columns:1fr 420px;gap:18px;padding:18px;max-width:1200px;margin:18px auto;}
#map{height:68vh;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.08);}
.panel{background:var(--panel);border-radius:12px;padding:14px;box-shadow:0 8px 30px rgba(2,6,23,0.06);overflow:auto;}
.card{background:#f8fafc;border-radius:10px;padding:10px;margin-bottom:12px;color:#0f1720;}
body.dark .card{background:#334155;color:#f1f5f9;}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:8px;border-bottom:1px solid #eef2f6;text-align:left}
th{background:#f1f7fb}
body.dark th{background:#1e293b;}
.hidden{display:none}
canvas{max-width:100%;height:300px!important}
footer{font-size:13px;color:var(--muted);text-align:center;margin-top:10px}

/* mascote top-left */
#mascoteWrap{position:fixed; left:15px; top:15px; width:120px; z-index:9999; cursor:pointer; display:flex; flex-direction:column; align-items:center; gap:8px;}
#mascoteSVG{width:100px;height:100px;filter: drop-shadow(0 6px 14px rgba(2,6,23,0.25));transition:transform .2s;}
#mascoteWrap:hover #mascoteSVG{transform:scale(1.08);}
#fala{background:var(--panel);padding:10px 12px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.18);max-width:260px;font-size:14px;color:var(--text);border:1px solid #ccc;}
body.dark #fala{border-color:#334155;}
.rays{transform-origin:center;animation:spin 12s linear infinite;}
@keyframes spin{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}
.drop{stroke:rgba(0,120,200,0.9);stroke-width:2;stroke-linecap:round;opacity:0;animation:dropAnim 1s ease-in-out infinite;}
@keyframes dropAnim{0%{transform:translateY(-6px);opacity:0}50%{opacity:1}100%{transform:translateY(6px);opacity:0}}
.sweat{fill:rgba(255,255,255,0.9);opacity:0;transition:opacity .2s}
.scarf{opacity:0;transition:opacity .2s}
.tilt{transform:rotate(-12deg)}
/* botÃ£o projeto */
#btnProjeto{position:fixed;right:15px;bottom:15px;padding:12px 18px;background:var(--accent);color:#fff;font-weight:600;border:none;border-radius:12px;cursor:pointer;z-index:9999;transition:all .2s;}
#btnProjeto:hover{background:#0f98df;transform:translateY(-2px);}
#modalProjeto{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:9998;overflow-y:auto;scroll-behavior:smooth;padding:20px;}
#modalProjeto .content{background:var(--panel);padding:20px;border-radius:12px;max-width:700px;width:100%;color:var(--text);position:relative;}
#modalProjeto .content h2{margin-top:0;}
#closeProjeto{position:absolute;top:12px;right:12px;cursor:pointer;font-size:18px;background:none;border:none;color:var(--text);}
@media(max-width:980px){.wrap{grid-template-columns:1fr} #map{height:50vh} #mascoteWrap{left:10px;top:10px;width:90px} #mascoteSVG{width:80px;height:80px}}
</style>
</head>
<body>
<header>
<h1>â˜€ï¸ PrevisÃ£o do Tempo â€” Montes Claros (MG)</h1>
<div id="themeBtns">
<button id="btnSun" title="Modo Claro">â˜€ï¸</button>
<button id="btnMoon" title="Modo Escuro">ğŸŒ™</button>
</div>
</header>

<nav>
<button id="btnHome" class="active">ğŸ  Home</button>
<button id="btnMax">ğŸŒ¡ï¸ MÃ¡ximas</button>
<button id="btnMin">â„ï¸ MÃ­nimas</button>
<button id="btnVento">ğŸ’¨ Ventos</button>
<button id="btnUmidade">ğŸ’§ Umidade</button>
</nav>

<main class="wrap">
<div id="map"></div>
<aside class="panel">
<section id="secHome">
<div class="card">
<strong id="localTitle">Montes Claros, Minas Gerais</strong>
<div style="color:var(--muted);font-size:13px;margin-top:4px" id="coords">Lat â€” â€¢ Lon â€”</div>
</div>
<div class="card" id="resumoHoje">
<h3>ğŸ“… Hoje â€” Resumo</h3>
<div><strong id="dataHoje">â€”</strong></div>
<div>ğŸŒ¡ï¸ Temperatura: <span id="tempHoje">--</span></div>
<div>ğŸŒ§ï¸ Chuva: <span id="chuvaHoje">--</span></div>
<div>ğŸ’¨ Vento: <span id="ventoHoje">--</span></div>
<div>ğŸ’§ Umidade: <span id="umidadeHoje">--</span></div>
</div>
<div class="card">
<h3>ğŸ“† PrÃ³ximos 7 dias</h3>
<table>
<thead><tr><th>Data</th><th>MÃ¡x</th><th>MÃ­n</th><th>Chuva</th><th>Vento</th><th>Umidade</th></tr></thead>
<tbody id="tabela"></tbody>
</table>
</div>
<footer>Dados: Open-Meteo â€¢ Mapa: OpenStreetMap</footer>
</section>
<section id="secMax" class="hidden"><h3>ğŸŒ¡ï¸ Temperaturas MÃ¡ximas (7 dias)</h3><canvas id="grafMax"></canvas></section>
<section id="secMin" class="hidden"><h3>â„ï¸ Temperaturas MÃ­nimas (7 dias)</h3><canvas id="grafMin"></canvas></section>
<section id="secVento" class="hidden"><h3>ğŸ’¨ Velocidade e DireÃ§Ã£o do Vento (7 dias)</h3><canvas id="grafVento"></canvas></section>
<section id="secUmidade" class="hidden"><h3>ğŸ’§ Umidade Relativa (7 dias)</h3><canvas id="grafUmidade"></canvas></section>
</aside>
</main>

<!-- mascote -->
<div id="mascoteWrap" title="Clique para dicas">
<svg id="mascoteSVG" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
  <g id="rays" class="rays">
      <g transform="translate(100 100)">
        <g id="raysGroup">
          <g transform="rotate(0)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(30)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(60)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(90)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(120)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(150)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(180)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(210)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(240)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(270)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(300)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
          <g transform="rotate(330)"><rect x="-6" y="-80" width="12" height="36" rx="6" fill="#FFD166"/></g>
        </g>
      </g>
    </g>
  <circle id="core" cx="100" cy="100" r="36" fill="#FFD54A" stroke="#FFB300" stroke-width="3"/>
  <ellipse id="eyeL" cx="86" cy="95" rx="5" ry="6" fill="#072033"/>
  <ellipse id="eyeR" cx="114" cy="95" rx="5" ry="6" fill="#072033"/>
  <path id="mouth" d="M85,110 Q100,120 115,110" stroke="#072033" stroke-width="3" fill="transparent" stroke-linecap="round"/>
  <g id="rainGroup" transform="translate(100,120)">
    <path class="drop" d="M-24,-10 q2,6 4,0"/>
    <path class="drop" d="M0,-10 q2,6 4,0"/>
    <path class="drop" d="M24,-10 q2,6 4,0"/>
  </g>
  <path id="sweat" class="sweat" d="M130,78 q6,8 0,16 q-6,8 -10,2 q6,-10 10,-18"/>
  <g id="scarf" class="scarf" transform="translate(48,126)">
    <rect x="0" y="0" width="104" height="12" rx="6" fill="#FF6B6B"/>
    <rect x="68" y="6" width="16" height="24" rx="6" fill="#FF6B6B"/>
  </g>
</svg>
<div id="fala">OlÃ¡! Sou o Solzinho â˜€ï¸ â€” clique para dicas rÃ¡pidas.</div>
</div>

<!-- BOTÃƒO PROJETO -->
<button id="btnProjeto">Projeto</button>
<div id="modalProjeto">
  <div class="content">
    <button id="closeProjeto">âœ–</button>
    <h2>ğŸŒ Projeto - EstaÃ§Ã£o MeteorolÃ³gica Montes Claros</h2>
    <p>Este projeto foi desenvolvido como uma soluÃ§Ã£o interativa para visualizaÃ§Ã£o de dados meteorolÃ³gicos da cidade de Montes Claros, MG.</p>
    <h3>ğŸ“‹ Entrevista / DocumentaÃ§Ã£o</h3>
    <p><strong>Objetivo:</strong> Criar um site que apresente temperatura mÃ¡xima, mÃ­nima, vento, umidade e mapa da cidade de Montes Claros.</p>
    <p><strong>Cliente:</strong> Empresa XYZ solicitou uma estaÃ§Ã£o meteorolÃ³gica online para monitoramento rÃ¡pido e intuitivo.</p>
    <p><strong>Funcionalidades:</strong></p>
    <ul>
      <li>BotÃµes de navegaÃ§Ã£o entre dados de mÃ¡ximas, mÃ­nimas, vento e umidade.</li>
      <li>Mapa interativo usando OpenStreetMap.</li>
      <li>Mascote animado Solzinho com dicas sobre o tempo.</li>
      <li>Modo claro e escuro da pÃ¡gina.</li>
      <li>Resumo do dia e grÃ¡ficos de previsÃ£o para 7 dias.</li>
      <li>BotÃ£o Projeto exibindo documentaÃ§Ã£o e entrevista.</li>
    </ul>
    <p><strong>Tecnologias:</strong> HTML5, CSS3, JavaScript, Leaflet, Chart.js, API Open-Meteo.</p>
  </div>
</div>

<script>
// === MAPA ===
const LAT=-16.7283,LON=-43.8583,TZ='America/Sao_Paulo';
const map=L.map('map').setView([LAT,LON],11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'&copy; OpenStreetMap'}).addTo(map);
L.marker([LAT,LON]).addTo(map).bindPopup('Montes Claros, MG').openPopup();

// === ELEMENTOS ===
const tabela=document.getElementById('tabela');
const tempHoje=document.getElementById('tempHoje'),chuvaHoje=document.getElementById('chuvaHoje'),
ventoHoje=document.getElementById('ventoHoje'),umidadeHoje=document.getElementById('umidadeHoje'),
dataHoje=document.getElementById('dataHoje');
const fala=document.getElementById('fala'),rain=document.getElementById('rainGroup'),
sweat=document.getElementById('sweat'),scarf=document.getElementById('scarf'),mascot=document.getElementById('mascoteSVG');

let lastData=null;
const dicas=[
  'Oi! Sou o Solzinho â˜€ï¸ â€” clique para dicas rÃ¡pidas.',
  'Leve sempre Ã¡gua ğŸ’§ para se manter hidratado.',
  'Use guarda-chuva se chover â˜”.',
  'Proteja-se do vento forte ğŸ’¨.',
  'Vista roupas leves em dias quentes ğŸŒ.',
  'Use um casaco se estiver frio ğŸ§£.'
];
let dicaIndex=0;
document.getElementById('mascoteWrap').addEventListener('click',()=>{
  dicaIndex=(dicaIndex+1)%dicas.length;
  fala.textContent=dicas[dicaIndex];
});

// === CARREGAR DADOS ===
async function carregar(){
  const url=`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,windspeed_10m_max,winddirection_10m_dominant,relative_humidity_2m_max&timezone=${TZ}`;
  const r=await fetch(url);const j=await r.json();const d=j.daily; lastData=d;
  const fmt=i=>new Intl.DateTimeFormat('pt-BR',{weekday:'short',day:'2-digit',month:'short'}).format(new Date(i+'T00:00'));
  tabela.innerHTML='';
  d.time.forEach((t,i)=>tabela.innerHTML+=`<tr><td>${fmt(t)}</td><td>${d.temperature_2m_max[i]}Â°C</td><td>${d.temperature_2m_min[i]}Â°C</td><td>${d.precipitation_sum[i]}mm</td><td>${d.windspeed_10m_max[i]}km/h</td><td>${d.relative_humidity_2m_max[i]}%</td></tr>`);
  dataHoje.textContent=fmt(d.time[0]);
  tempHoje.textContent=`${d.temperature_2m_max[0]}Â°C / ${d.temperature_2m_min[0]}Â°C`;
  chuvaHoje.textContent=d.precipitation_sum[0]+' mm';
  ventoHoje.textContent=d.windspeed_10m_max[0]+' km/h';
  umidadeHoje.textContent=d.relative_humidity_2m_max[0]+'%';
  atualizarMascote(d);
  gerarGraficos(d);
}

function atualizarMascote(d){
  const p=d.precipitation_sum[0], t=d.temperature_2m_max[0], w=d.windspeed_10m_max[0], h=d.relative_humidity_2m_max[0];
  rain.style.opacity=0; sweat.style.opacity=0; scarf.style.opacity=0; mascot.classList.remove('tilt');
  if(p>5){rain.style.opacity=1; fala.textContent='Vai chover hoje â˜” leve guarda-chuva!';}
  else if(t>=34){sweat.style.opacity=1; fala.textContent='Muito calor ğŸŒ hidrate-se bem!';}
  else if(t<=19){scarf.style.opacity=1; fala.textContent='Fresquinho hoje ğŸ§£ leve uma blusa.';}
  else if(w>40){mascot.classList.add('tilt'); fala.textContent='Vento forte ğŸ’¨ cuidado com poeira!';}
  else if(h<30){fala.textContent='Ar seco ğŸ’§ beba bastante Ã¡gua.';}
  else{fala.textContent='Dia agradÃ¡vel ğŸ˜ Ã³timo para passear.';}
}

// === TEMA ===
document.getElementById('btnSun').onclick=()=>document.body.classList.remove('dark');
document.getElementById('btnMoon').onclick=()=>document.body.classList.add('dark');

// === MENU ===
const secs={Home:'secHome',Max:'secMax',Min:'secMin',Vento:'secVento',Umidade:'secUmidade'};
for(const [k,v] of Object.entries(secs))
document.getElementById('btn'+k).onclick=()=>{
  for(const [kk,vv] of Object.entries(secs)){
    document.getElementById(vv).classList.toggle('hidden',kk!==k);
    document.getElementById('btn'+kk).classList.toggle('active',kk===k);
  }
};

// === GRÃFICOS ===
let g1,g2,g3,g4;
function gerarGraficos(d){
  const labels=d.time.map(i=>new Intl.DateTimeFormat('pt-BR',{weekday:'short'}).format(new Date(i+'T00:00')));
  g1=new Chart(document.getElementById('grafMax'),{type:'line',data:{labels, datasets:[{label:'MÃ¡xima Â°C',data:d.temperature_2m_max,borderColor:'rgba(255,99,71,0.9)',backgroundColor:'rgba(255,99,71,0.2)',fill:true,tension:0.3}]}}); 
  g2=new Chart(document.getElementById('grafMin'),{type:'line',data:{labels, datasets:[{label:'MÃ­nima Â°C',data:d.temperature_2m_min,borderColor:'rgba(66,135,245,0.9)',backgroundColor:'rgba(66,135,245,0.2)',fill:true,tension:0.3}]}}); 
  g3=new Chart(document.getElementById('grafVento'),{type:'bar',data:{labels, datasets:[{label:'Velocidade (km/h)',data:d.windspeed_10m_max,backgroundColor:'rgba(0,200,83,0.6)'},{label:'DireÃ§Ã£o (Â°)',data:d.winddirection_10m_dominant,backgroundColor:'rgba(100,181,246,0.6)',yAxisID:'y2'}]},options:{scales:{y:{title:{display:true,text:'km/h'}},y2:{position:'right',title:{display:true,text:'DireÃ§Ã£o (Â°)'}}}}}); 
  g4=new Chart(document.getElementById('grafUmidade'),{type:'line',data:{labels, datasets:[{label:'Umidade %',data:d.relative_humidity_2m_max,borderColor:'rgba(0,150,255,0.9)',backgroundColor:'rgba(0,150,255,0.2)',fill:true,tension:0.3}]},options:{scales:{y:{beginAtZero:true,max:100,title:{display:true,text:'%'}}}}}); 
}

carregar();

// === BOTÃƒO PROJETO ===
const btnProjeto = document.getElementById('btnProjeto');
const modalProjeto = document.getElementById('modalProjeto');
const closeProjeto = document.getElementById('closeProjeto');

btnProjeto.onclick = () => modalProjeto.style.display = 'flex';
closeProjeto.onclick = () => modalProjeto.style.display = 'none';
modalProjeto.addEventListener('click', e => { if(e.target === modalProjeto) modalProjeto.style.display = 'none'; });
</script>
</body>
</html>
